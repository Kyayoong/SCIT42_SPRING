-- 중고거래 사이트 예제
DROP TABLE MARKET_MEMBER;
DROP TABLE MARKET_BOARD;
DROP SEQUENCE MARKET_BOARD_SEQ;
DROP TABLE MARKET_REPLY;
DROP SEQUENCE MARKET_REPLY_SEQ;

-- 회원정보 테이블
CREATE TABLE MARKET_MEMBER(
    MEMBERID    VARCHAR2(20)    PRIMARY KEY,
    MEMBERPW    VARCHAR2(100)   NOT NULL,
    MEMBERNAME  VARCHAR2(20)    NOT NULL,
    PHONE       VARCHAR2(20)    NOT NULL,
    ENABLED     NUMBER(1)       DEFAULT 1,
    ROLENAME    VARCHAR2(20)    DEFAULT 'ROLE_USER'
);

-- 판매글 테이블
CREATE TABLE MARKET_BOARD(
    BOARDNUM    NUMBER          PRIMARY KEY,
    MEMBERID    VARCHAR2(20)    NOT NULL,
    TITLE       VARCHAR2(200)   NOT NULL,
    CONTENTS    VARCHAR2(2000)  NOT NULL,
    INPUTDATE   DATE            DEFAULT SYSDATE,
    CATEGORY    VARCHAR2(50),
    SOLDOUT     CHAR(1)         DEFAULT 'N',
    BUYERID     VARCHAR2(20)
);

--판매글 일련번호 시퀀스
CREATE SEQUENCE MARKET_BOARD_SEQ;

-- 리플 테이블
CREATE TABLE MARKET_REPLY (
    REPLYNUM    NUMBER          PRIMARY KEY,
    BOARDNUM    NUMBER          REFERENCES MARKET_BOARD(BOARDNUM),
    MEMBERID    VARCHAR(20)     NOT NULL,
    REPLYTEXT   VARCHAR2(500),
    INPUTDATE   DATE            DEFAULT SYSDATE
);

--리플 일련번호 시퀀스
CREATE SEQUENCE MARKET_REPLY_SEQ;
